/**
 * Welcome to CSML Studio!
 *
 * This simple CSML starter flow works out of the box, and you can easily
 * try it on the right hand side by clicking on `build and run`.
 *
 * Some useful CSML links:
 * üëâ Getting started: https://docs.csml.dev/studio/getting-started
 * üëâ Give CSML a üåü on Github: https://github.com/CSML-by-Clevy/csml-engine
 * üëâ Join the CSML community on Slack: https://csml.dev/slack
 */
start:

  goto choicetutorial
  
choicetutorial:
  do NOOB = Button("üí™ Trucs et astuces d√©butants.tes")
  do BUBBLE = Button("üôå Entrer en contact avec des personnes")
  do MEETING = Button("üé¶ Participer √† une visioconf√©rence (Jitsi)")
  do AREA = Button("‚ùî Interagir avec le d√©cor")
  do EMOJI = Button("üòÄ Utiliser des emojis")
  do CUSTOM = Button("ü§ñ Syst√®me de personnalisation")
  do SOUND = Button("üîä R√©glages ambiance sonore")
  do INFOS = Button("üñºÔ∏è Voir les informations d'une personne (Membres uniquement)")
  do HELP = Button("ü§Ø Des bugs ? Besoin d'une aide technique ?")

  say Typing(500)
  say "Voici la liste des fonctionnalit√©s, quelle est celle que vous souhaitez approfondir ?"
  say Question(
     button_type="quick_reply",
     //buttons = [DEBUTANTS, CONTACT, VISIOCONF, DECOR, EMOJI, CUSTOM, SON, INFOS, AIDE, MENU]
    buttons = [NOOB, BUBBLE, MEETING, AREA, EMOJI, CUSTOM, SOUND, INFOS, HELP]
  )
  hold


// SECTION NOOB

  if (event match NOOB) {
    say Typing(2000)
    say "Tout d'abord, bravo ! Si vous √™tes arriv√©.√©es jusqu'√† moi, c'est d√©j√† une belle √©tape."
    say Image("https://media.giphy.com/media/1mgpdUbUyT7z0olfmq/giphy.gif")
    say Typing(4000)
    say "Pour information, les d√©placements se font avec les fl√®ches, n√©anmoins vous pouvez aussi utiliser les touches **Z Q S D**  de votre clavier."
    say Typing(6000)
    say "Envie d'acc√©l√©rer ? Appuyer sur **shift** en m√™me temps que la touche de d√©placement."
    say Typing(2000)
    say Video("https://mapwa.net/static/perso/watuto/WATUTO-shift-speed.mp4")
    say Typing(6000)
    
    do CONTINUE = Button("En savoir plus")
    do MENU = Button("‚§¥Ô∏èRetour √† la liste des fonctionnalit√©s")

    say Question("Voulez-vous en savoir plus ?",
      button_type="quick_reply",
      buttons = [CONTINUE, MENU]
    )
    hold  

    if (event match CONTINUE) {
        goto noob_step1
    }
    if (event match MENU) {
      goto choicetutorial
    }
  }

// NOOB STEP 1
noob_step1:
  say "En bas √† droite, vous pouvez √† tout moment d√©sactiver ou activer votre **microphone** ou votre **cam√©ra**, ou les deux."
  say Typing(3000)
  say Video("https://mapwa.net/static/perso/watuto/WATUTO-icon-microphone-camera.mp4")

  do CONTINUE = Button("En savoir plus")
  do MENU = Button("‚§¥Ô∏èRetour √† la liste des fonctionnalit√©s")

  say Question("Voulez-vous en savoir plus ?",
    button_type="quick_reply",
    buttons = [CONTINUE, MENU]
  )
  hold 

  if (event match CONTINUE) {
    goto noob_step2
  }
  if (event match MENU) {
    goto choicetutorial
  }

// NOOB STEP 2

noob_step2:
  say Typing(2000)
  say "Pour avoir une vue plus large de la carte, vous pouvez aussi zoomer le texte de la page de votre navigateur."
  say Typing(2000)
  say "Avec les touches **CTRL + Molette de souris** par exemple ou via les menus de votre navigateur."
  say Typing(3000)
  say Video("https://mapwa.net/static/perso/watuto/WATUTO-zoom.mp4")
  goto endtutorial




  if (event match BUBBLE) {

    say Typing(1000)
    say Image("https://mapwa.net/static/perso/watuto/WA-bulle-rencontre.png")
    say "Quand vous vous rapprochez d'une personne, une bulle appara√Æt, et vous pouvez instantann√©ment discuter avec cette personne."
    say Typing(1000)
    say "De m√™me si une personne s'approche de vous, un son vous pr√©viendra."
    say Typing(1000)
    say "Ce mode de conversation est limit√© √† 4 personnes. √Ä 4, la bulle devient rouge."
    say Typing(1000)
    say Video("https://mapwa.net/static/perso/watuto/WATUTO-conversation-bubble-resized.mp4")
    say Typing(1000)
    say "Une pr√©cision, certaines zones de la carte peuvent √™tre silencieuse, dans ces zones, il n'est pas possible de converser avec quelqu'un d'autre."
    goto endtutorial
  }

  if (event match MEETING) {
    say Typing(1000)
    say "Certains endroits sur la carte peuvent permettre de faire une visioconf√©rence avec l'outil Jitsi."
    say Typing(2000)
    say "Cela permet par exemple d'√™tre plus nombreux, et d'avoir quelques fonctionnalit√©s suppl√©mentaires."
    say Typing(1000)
    say Video("https://mapwa.net/static/perso/2022/map/qg/qg-PP.png")
    say "√† suivre"
    goto endtutorial
  }

  if (event match AREA) {
    say Typing(1000)
    say "Certains endroits de la carte peuvent avoir des actions, elles sont souvent rendues visibles par un signe (une pancarte, des traces de pas au so‚Ä¶)."
    say Typing(3000)
    say "Ainsi ces zones peuvent ouvrir une page web, une vid√©o ou un popup par exemple"
    say Typing(3000)
    say Video("https://mapwa.net/static/perso/watuto/WATUTO-zone-actions.mp4")
    say Video("https://mapwa.net/static/perso/watuto/WATUTO-video-youtube.mp4")
    
    do CONTINUE = Button("En savoir plus")
    do MENU = Button("‚§¥Ô∏èRetour √† la liste des fonctionnalit√©s")

    say Question("Voulez-vous en savoir plus ?",
      button_type="quick_reply",
      buttons = [CONTINUE, MENU]
    )
    hold  

    if (event match CONTINUE) {
        goto area_step1
    }
    if (event match MENU) {
      goto choicetutorial
    }

  }

  if (event match EMOJI) {
    say Typing(1000)
    say "Pour utiliser des emojis, cliquez sur votre personnage, vous verrez appara√Ætre un cercle d'emojis."
    say Typing(1000)
    say Video("https://mapwa.net/static/perso/watuto/WATUTO-emoji.mp4")
    say Typing(1000)
    say "S√©lectionnez directement celui que vous souhaitez !"
    goto endtutorial
  }

  if (event match CUSTOM) {
    say Typing(1000)
    say "Il est possible de personnaliser votre personnage, changer de nom, d'apparence, ajouter un compagnon‚Ä¶ :"
    say Typing(1000)
    say Video("https://mapwa.net/static/perso/watuto/WATUTO-customize-your-woka-resized.mp4")
    goto endtutorial    
  }

  if (event match SOUND) {
    say Typing(1000)
    say "Dans certaines zones de la carte, vous pouvez avoir des ambiances sonores."
    say Typing(500)
    say "Dans ce cas, vous pouvez r√©gler le volume en utilisant le curseur qui appara√Æt en haut au milieu de votre √©cran."
    say Typing(1000)
    say Video("https://mapwa.net/static/perso/watuto/WATUTO-sound.mp4")
    goto endtutorial        
  }

  if (event match INFOS) {
    say Typing(1000)
    say "En cliquant sur l'avatar (Woka) d'une personne, vous pouvez voir sa carte de visite."
    say Video("https://mapwa.net/static/perso/watuto/WATUTO-wacard.mp4")
    say "Par exemple : pr√©nom et nom, ..."
    goto endtutorial
  }

  if (event match HELP) {
    say Typing(1000)
    say "Si vous rencontrez des bugs ou avez besoin d'assistance technique, n'h√©sitez pas √† demander autour de vous."
    say Typing(2000)
    say "Vous pouvez aussi nous rejoindre sur le Discord de WorkAdventure ici : https://discord.gg/YGtngdh9gt"
    say Typing(2000)
    say "Il est √©galement possible de venir poser directement vos questions √† l'√©quipe de WorkAdventure."
    say Image("https://mapwa.net/static/perso/watuto/WATUTO-team.png")
    say "https://play.staging.workadventu.re/@/tcm/workadventure/wa-village"
    goto endtutorial
  }

  // all other cases, including back to home menu
  else {
    say Typing(1000)
    goto menu@Default
  }


area_step1:
  say Typing(3000)
  say "La fen√™tre qui s'ouvre peut √™tre agrandi en plein √©cran, d√©plac√©e ou ferm√©e √† l'aide des ic√¥nes en haut √† gauche."
  say Typing(3000)
  say Video("https://mapwa.net/static/perso/watuto/WATUTO-window-icons.mp4")
  goto endtutorial

endtutorial:
  say "Que voulez-vous faire ?"
  do BACK1 = Button("‚¨ÜÔ∏èRevenir √† la liste des fonctionnalit√©s")
  do BACK2 = Button("‚¨ÜÔ∏èRetour au menu d'accueil")
  say Question(
     button_type="quick_reply",
     buttons = [BACK1, BACK2]
  )
  hold

  if (event match BACK1) {
    say Typing(1000)
    goto choicetutorial
  }

  if (event match BACK2) {
    say Typing(1000)
    goto menu@Default
  }
